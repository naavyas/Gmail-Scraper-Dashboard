{"ast":null,"code":"var _jsxFileName = \"/Users/naavyasethi/Desktop/dashboard v2/frontend/src/components/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst Dashboard = () => {\n  _s();\n  const [data, setData] = useState(null);\n  const [needsAuth, setNeedsAuth] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Always try to fetch the stacked summary\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  // If redirected with ?auth=success, reload data\n  useEffect(() => {\n    if (window.location.search.includes('auth=success')) {\n      window.history.replaceState({}, document.title, window.location.pathname);\n      fetchData();\n    }\n  }, []);\n  const fetchData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await axios.get('/api/emails/stacked-summary');\n      setData(res.data);\n      setNeedsAuth(false);\n    } catch (err) {\n      setNeedsAuth(true);\n      setData(null);\n      setError(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAuth = () => {\n    window.location.href = '/auth';\n  };\n\n  // Prepare stacked bar chart data\n  const getChartData = () => {\n    if (!data) return null;\n    const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40', '#C9CBCF', '#4BC0C0', '#FF6384', '#FFCE56'];\n    return {\n      labels: data.weeks,\n      datasets: data.users.map((user, idx) => ({\n        label: user.email,\n        data: user.data,\n        backgroundColor: colors[idx % colors.length],\n        stack: 'Stack 0'\n      }))\n    };\n  };\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top'\n      },\n      title: {\n        display: true,\n        text: 'Outbound Emails per User (Stacked by Week)'\n      }\n    },\n    scales: {\n      x: {\n        stacked: true\n      },\n      y: {\n        stacked: true,\n        beginAtZero: true\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Gmail Analytics Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Track your team's outbound email activity by week.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), needsAuth ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDD11 Authentication Required\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please authenticate with Google to access your Gmail analytics.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"auth-button\",\n        onClick: handleAuth,\n        children: \"Connect Gmail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this) : loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading chart data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this) : data ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-container\",\n      children: /*#__PURE__*/_jsxDEV(Bar, {\n        data: getChartData(),\n        options: chartOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"3WO7ObUGSQxoNr+uxCtiTFBZr8k=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","axios","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","Dashboard","_s","data","setData","needsAuth","setNeedsAuth","loading","setLoading","error","setError","fetchData","window","location","search","includes","history","replaceState","document","title","pathname","res","get","err","handleAuth","href","getChartData","colors","labels","weeks","datasets","users","map","user","idx","label","email","backgroundColor","length","stack","chartOptions","responsive","plugins","legend","position","display","text","scales","x","stacked","y","beginAtZero","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","options","_c","$RefreshReg$"],"sources":["/Users/naavyasethi/Desktop/dashboard v2/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Bar } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\n\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\n\nconst Dashboard = () => {\n  const [data, setData] = useState(null);\n  const [needsAuth, setNeedsAuth] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Always try to fetch the stacked summary\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  // If redirected with ?auth=success, reload data\n  useEffect(() => {\n    if (window.location.search.includes('auth=success')) {\n      window.history.replaceState({}, document.title, window.location.pathname);\n      fetchData();\n    }\n  }, []);\n\n  const fetchData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await axios.get('/api/emails/stacked-summary');\n      setData(res.data);\n      setNeedsAuth(false);\n    } catch (err) {\n      setNeedsAuth(true);\n      setData(null);\n      setError(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAuth = () => {\n    window.location.href = '/auth';\n  };\n\n  // Prepare stacked bar chart data\n  const getChartData = () => {\n    if (!data) return null;\n    const colors = [\n      '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',\n      '#FF9F40', '#C9CBCF', '#4BC0C0', '#FF6384', '#FFCE56'\n    ];\n    return {\n      labels: data.weeks,\n      datasets: data.users.map((user, idx) => ({\n        label: user.email,\n        data: user.data,\n        backgroundColor: colors[idx % colors.length],\n        stack: 'Stack 0',\n      }))\n    };\n  };\n\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: { position: 'top' },\n      title: { display: true, text: 'Outbound Emails per User (Stacked by Week)' }\n    },\n    scales: {\n      x: { stacked: true },\n      y: { stacked: true, beginAtZero: true }\n    }\n  };\n\n  return (\n    <div className=\"dashboard\">\n      <h1>Gmail Analytics Dashboard</h1>\n      <p>Track your team's outbound email activity by week.</p>\n      {needsAuth ? (\n        <div className=\"auth-section\">\n          <h2>ðŸ”‘ Authentication Required</h2>\n          <p>Please authenticate with Google to access your Gmail analytics.</p>\n          <button className=\"auth-button\" onClick={handleAuth}>\n            Connect Gmail\n          </button>\n        </div>\n      ) : loading ? (\n        <div className=\"loading\">Loading chart data...</div>\n      ) : data ? (\n        <div className=\"chart-container\">\n          <Bar data={getChartData()} options={chartOptions} />\n        </div>\n      ) : error ? (\n        <div className=\"error\">{error}</div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}